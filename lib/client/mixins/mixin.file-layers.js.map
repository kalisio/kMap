{"version":3,"sources":["../../../src/client/mixins/mixin.file-layers.js"],"names":["fileLayersMixin","mounted","Control","FileLayerLoad","LABEL","fileControl","fileLayerLoad","layer","geoJson","layerOptions","getGeoJsonOptions","addToMap","fileSizeLimit","configuration","formats","controls","push","$on","loader","on","removeLayer","fileLayer","addLayer","event","filename","$emit","set"],"mappings":";;;;;;AAAA;;;;AACA;;AACA;;;;AAEA,IAAIA,kBAAkB;AACpBC,SADoB,qBACT;AAAA;;AACT,sBAAEC,OAAF,CAAUC,aAAV,CAAwBC,KAAxB,GAAgC,2CAAhC;AACA,QAAIC,cAAc,kBAAEH,OAAF,CAAUI,aAAV,CAAwB;AACxC;AACA;AACA;AACA;AACAC,aAAO,kBAAEC,OAL+B;AAMxC;AACAC,oBAAc,KAAKC,iBAAL,EAP0B;AAQxC;AACAC,gBAAU,KAT8B;AAUxC;AACAC,qBAAe,KAAKC,aAAL,CAAmBD,aAAnB,IAAoC,OAAO,IAXlB;AAYxC;AACAE,eAAS,CACP,UADO,EAEP,MAFO;AAb+B,KAAxB,CAAlB;AAkBA,SAAKC,QAAL,CAAcC,IAAd,CAAmBX,WAAnB;AACA,SAAKY,GAAL,CAAS,eAAT,EAA0B,aAAK;AAC7BZ,kBAAYa,MAAZ,CAAmBC,EAAnB,CAAsB,aAAtB,EAAqC,iBAAS;AAC5C;AACA,cAAKC,WAAL,CAAiB,MAAKC,SAAtB;AACA;AACA,cAAKA,SAAL,GAAiB,MAAKC,QAAL,CAAcC,MAAMhB,KAApB,EAA2BgB,MAAMC,QAAjC,CAAjB;AACA,cAAKC,KAAL,CAAW,iBAAX,EAA8B,MAAKJ,SAAnC,EAA8CE,MAAMC,QAApD;AACD,OAND;AAOD,KARD;AASD;AA/BmB,CAAtB;;AAkCA,cAAME,GAAN,CAAU,uBAAV,EAAmC1B,eAAnC;;kBAEeA,e","file":"mixin.file-layers.js","sourcesContent":["import L from 'leaflet'\r\nimport 'leaflet-filelayer'\r\nimport { Store } from 'kCore/client'\r\n\r\nlet fileLayersMixin = {\r\n  mounted () {\r\n    L.Control.FileLayerLoad.LABEL = '<i class=\"material-icons\">file_upload</i>'\r\n    let fileControl = L.Control.fileLayerLoad({\r\n      // Allows you to use a customized version of L.geoJson.\r\n      // For example if you are using the Proj4Leaflet leaflet plugin,\r\n      // you can pass L.Proj.geoJson and load the files into the\r\n      // L.Proj.GeoJson instead of the L.geoJson.\r\n      layer: L.geoJson,\r\n      // See http://leafletjs.com/reference.html#geojson-options\r\n      layerOptions: this.getGeoJsonOptions(),\r\n      // Add to map after loading (default: true) ?\r\n      addToMap: false,\r\n      // File size limit in kb (default: 1024) ?\r\n      fileSizeLimit: this.configuration.fileSizeLimit || 1024 * 1024,\r\n      // Restrict accepted file formats (default: .geojson, .kml, and .gpx) ?\r\n      formats: [\r\n        '.geojson',\r\n        '.kml'\r\n      ]\r\n    })\r\n    this.controls.push(fileControl)\r\n    this.$on('controlsReady', _ => {\r\n      fileControl.loader.on('data:loaded', event => {\r\n        // Remove any previous layer\r\n        this.removeLayer(this.fileLayer)\r\n        // Keep track of layer\r\n        this.fileLayer = this.addLayer(event.layer, event.filename)\r\n        this.$emit('fileLayerLoaded', this.fileLayer, event.filename)\r\n      })\r\n    })\r\n  }\r\n}\r\n\r\nStore.set('mixins.map.fileLayers', fileLayersMixin)\r\n\r\nexport default fileLayersMixin\r\n"]}